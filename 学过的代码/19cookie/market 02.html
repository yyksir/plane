<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		
		
	</head>
	<body>
		
		<table id="tab">
			<tr>
				<td>编号</td>
				<td>名称</td>
				<td>价格</td>
			</tr>
		</table>
		<br><br><br>
		总金额：<input type="text" id="txt" /><input type="button" id="btn" value="点击结算" />
	</body>
</html>
<script>
	window.onload=function(){
		var arr=getCookie("prolist");
		console.log(arr);
		var str="";
		var num=0;
		for(i=0;i<arr.length;i++){
			
			str+=`<tr>
				<td>${arr[i].pid}</td>
				<td>${arr[i].shopName}</td>
				<td>${arr[i].price}</td>
			
			</tr>`;
			num+=parseInt(arr[i].price);
			
		}
		var oTable=document.getElementById("tab");
		
			oTable.innerHTML+=str;
		
		 oBtn=document.getElementById("btn").onclick=function(){
		 	
		 document.getElementById("txt").value=num;
		 }
			
			
		
//		oTable.appendChild(str)
		
		
	}
	
	
	
	
	
	
	
	function getCookie(key){
	//uname=lichune; upwd=lichuen; addr=999; sex=girl
	if( document.cookie ){//如果cookie中有数据，才可以取数据
		var str = document.cookie
		var arr = str.split("; ");
		for( var i = 0 ; i < arr.length ; i++ ){
			var item = arr[i].split("=");
			if( item[0] == key ){
				return JSON.parse( item[1] );//将结果直接转成对象输出
			}
		}
		return [];//如果循环结束后，没有满足条件的key ， 就直接返回一个空数组
	}
	//如果没有cookie 也需要返回一个空数组
	return [];
}
</script>
