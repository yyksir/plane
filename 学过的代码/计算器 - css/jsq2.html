<!DOCTYPE html PUBLIC "-//W3C//Dli XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/Dli/xhtml1-transitional.dli">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>简易计算器</title>
<style type="text/css"  />

* { padding: 0; margin: 0; }
li { list-style: none; }
body { background: #940032; }

#counter { width: 500px; height: 420px; background:#939; margin: 50px auto 0; position: relative; }
#counter h2 { line-height: 42px; padding-left: 15px; font-size: 14px; font-family: arial; color: #ff3333; }
#counter a { font-weight: normal; text-decoration: none; color: #ff3333; }
#counter a:hover { text-decoration: underline; }
#bg { width: 280px; height: 200px; border: 3px solid #680023; background: #990033; filter: alpha(opacity=80); opacity: 0.8; position: absolute; left: 50%; top: 115px; margin-left: -141px; }
#counter_content { width: 250px; position: absolute; top: 130px; left: 130px; z-index: 1; }
#counter_content h3 { margin-bottom: 10px; }
#counter_content h3 input { border: none; width: 223px; height: 30px; line-height: 30px; padding: 0 10px; background: url(images/ico.png) no-repeat; text-align: right; color: #333; font-size: 14px; font-weight: bold; }
#counter_content div { width: 250px; }
#counter_content input { width: 60px; height: 30px; line-height: 30px; float: left; background: url(images/ico.png) no-repeat -303px 0; text-align: center; color: #fff; cursor: pointer; margin: 0 1px 4px 0; border:0; }
#counter_content div > input:hover { background: url(images/ico.png) no-repeat -243px 0; }
#counter p { width: 500px; position: absolute; bottom: 20px; left: 0; color: #ff3333; text-align: center; font-size: 12px; }
</style>
</head>
</head>

<body>

<div id="counter">
	<h2>简易计算</h2>
	<div id="counter_content">
		<h3><input id="input1" type="text" value="0" /></h3>
		<div id="div1">
            <input type="button" value="7"  />
            <input type="button" value="8" />
            <input type="button" value="9"  />
            <input type="button" value="+"  />
            <input type="button" value="4"  />
            <input type="button" value="5"  />
            <input type="button" value="6"  />
            <input type="button" value="-"  />
            <input type="button" value="1"  />
            <input type="button" value="2"  />
            <input type="button" value="3"  />
            <input type="button" value="*"  />
            <input type="button" value="0"  />
            <input type="button" value="C"  />
            <input type="button" value="="  />
            <input type="button" value="/"  />
		</div>
	</div>
</div>
</body>
</html>
<script>
	function $(id){
		return document.getElementById(id);
	}
	var oInput = $("input1"),
		opt = "",//记录操作符   
		sNum1 = 0 ,//记录第一个操作数
		odiv = $("div1"),
		opts = odiv.children;
	var flag = true;//控制是否允许第二个操作数的拼接条件  值为true表示可以拼接
	//运算
	function cal(num1,num2,opt){
		var num1 = Number( num1 );
		var num2 = Number( num2 );
		switch(opt){
			case "+" : return num1 + num2;
			case "-" : return num1 - num2;
			case "*" : return num1 * num2;
			case "/" : return num1 / num2;
			default : return Number( oInput.value );
		}
	}
	//利用委托为所有被操作按钮的父级元素div添加onclick事件
	odiv.onclick = function(e){
		var e = e || event;
		var target = e.target || e.srcElement;
		if( target.tagName == "INPUT" ){
			var val = target.value ;//记录当前点击按钮的value值
			//如果val值是 操作符   +  -  *  /  记录操作符    将文本框中的数据赋值给sNum1   运算
			//如果是 =  计算
			switch( val ){
				case "=":
					oInput.value = cal(sNum1,oInput.value,opt);
					break;
				case "+":
				case "-":
				case "*":
				case "/":
					oInput.value = cal(sNum1,oInput.value,opt);
					opt = val;//记录操作符
					sNum1 = oInput.value; //记录第一个数
					flag = false;//不允许追加了
					break;
				case "C":
					oInput.value = "";//清空文本框
					opt = "";//清空操作符
					sNum1 = "";//清空第一个数
					/*flag = true;*/
					break;
				default :  
					//点击数字
					//如果点击的是0， 将文本框变成空    
					oInput.value = oInput.value == "0" ? "" :oInput.value;
					//判断如果操作符是为空，说明数字要实现拼接
					if( opt == "" || flag ){
						oInput.value += val;
					}else{
						oInput.value = val;
						flag = true;//当第一个点击操作符号后  下一次在进行数字拼接时，opt的值不在是空
						//就需要将开关变量值变为 true，允许下一个操作数的数字拼接
					}
			}
		}
	}
</script>
 



















