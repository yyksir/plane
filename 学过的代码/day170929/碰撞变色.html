<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			#old{
			width:100px;
			height:100px;
			background:pink;
			position:absolute;
			left:0;
			top:0;
			cursor:move;
		}
			#new{
			width:200px;
			height:200px;
			background:blue;
			position:absolute;
			left:200px;
			top:200px;
			cursor:move;
		}
		</style>
	</head>
	<body>
		<div id="old"></div>
		<div id="new"></div>
	</body>
</html>
<script>
	function $(id){
		return document.getElementById(id);
	}
	$("old").onmousedown=function(e){
		var e=e||event;
		var disx=e.offsetX;
		var disy=e.offsetY;
		document.onmousemove=function(e){
			var e=e||event;
window.getSelection?window.getSelection().removeAllRanges():document.selection.empty();
//window.getSelection?window.getSelection().removeAllRanges():document.selection.empty();
			var x=e.pageX-disx;
			var y=e.pageY-disy;
			var maxx=window.innerWidth-100;
			var maxy=window.innerHeight-100;
			if(x<0){
				x=0;
			}else if(x>maxx){
				x=maxx;
			}
			if(y<0){
				y=0;
			}else if(y>maxy){
				y=maxy;
			}
			if(x>=100&&x<=400&&y>=100&&y<=400){
				$("new").style.backgroundColor="yellow";
			}else{
				
				$("new").style.backgroundColor="blue";
			}
			
			$("old").style.top=y+"px";
			$("old").style.left=x+"px";
		}
	}
	$("old").onmouseup=function(){
		document.onmousemove="";
	}
	
	
	
	
</script>
